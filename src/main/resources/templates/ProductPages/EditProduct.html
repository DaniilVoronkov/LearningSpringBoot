<!-- page for editing products -->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    
    <!-- Dynamic title that depends on the product name -->
    <title th:text="Edit + ' ' + ${ProductToEdit.getName()}"> </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
</head>
<body>
  <form th:method="PATCH">
      <div class="form-group">
          <!-- Product name input -->
        <label for="productName">Product Name:</label>
        <input id="productName" type="text" name="productName" placeholder="Name of the product" maxlength="100"
               class="form-control" th:value="${ProductToEdit.getName()}">
          <label for="productName" class="errorMessage" id="productNameError" style="display: none"></label>
      
          <!-- Product price input -->
        <label for="productPrice">Price:</label>
        <input id="productPrice" type="number" name="productPrice" placeholder="Product price:" th:value="${ProductToEdit.getPrice()}" class="form-control">
          <label for="productPrice" class="errorMessage" id="productPriceError" style="display: none"></label>
      
          <!-- product type select -->
       <label for="productType">Product Type:</label>
       <select name="productType" id="productType" class="form-select">
          <option th:each="label : ${ProductTypes}" th:value="${label}" th:text="${label}"></option>
       </select>
      </div>
      
      <!-- Edit button -->
      <button id="editButton" type="submit" class="btn btn-primary active" >Edit</button>
      
      <!-- getting value from id-->
      <script th:inline="javascript">
          const productId = [[${ProductToEdit.getId()}]];
          $(function () {
              $("productType").val([[${ProductToEdit.getType()}]]);
          })
      </script>
      
      <!-- External js that calls PATCH method in controller -->
      <script th:src="@{/JSScripts/EditPageScripts.js}" defer></script>
  </form>
</body>
</html>